
params {

	results                = "s3://noelnamai/data/results"
	genome_fasta           = "/mnt/efs/hg19/ucsc.hg19.fasta"
	known_dbsnps_file      = "/mnt/efs/hg19/dbsnp_138.hg19.vcf"
	cosmic_file            = "/mnt/efs/hg19/hg19_cosmic_v54_120711.vcf"
	known_indel_file       = "/mnt/efs/hg19/1000G_phase1.indels.hg19.sites.vcf"	
	known_dbsnps_1000_file = "/mnt/efs/hg19/1000G_phase1.snps.high_confidence.hg19.sites.vcf"
	mills_indel_file       = "/mnt/efs/hg19/Mills_and_1000G_gold_standard.indels.hg19.sites.vcf"

	threads {

		mutect2           = 1
		strelka2          = 1
		annovar           = 1
		mapping           = 1
		print_reads       = 1
		target_creator    = 1
		base_recalibrator = 1
    }
}

docker {

	enabled    = true
	remove     = true
	runOptions = '-u $(id -u):$(id -g)'
}

cloud {

	sharedStorageMount = "/mnt/efs"
	instanceType       = "c4.2xlarge"
	sharedStorageId    = "fs-f2aff213"
	subnetId           = "subnet-4ea1cf2a"
	securityGroup      = "sg-0e611108c17231471"
	imageId            = "ami-0ddd9d7fa0dee83f4"
	
	autoscale {

		minInstances      = 3
		maxInstances      = 10
		enabled           = true
		terminateWhenIdle = true
		spotPrice         = 0.1350
		starvingTimeout   = "1 min"
		idleTimeout       = "5 min"
		bootStorageSize   = "100 GB"
		instanceType      = "c4.2xlarge"
	}
}

process {

	scratch = true
}

executor {

	cpus         = 8
	dumpInterval = "1min"
	name         = "ignite"
}

workflow.onComplete = {

	println "Completed at     : $workflow.complete"
	println "Duration         : $workflow.duration"
	println "Execution status : ${workflow.success ? 'OK': 'failed'}"
	println "Command line     : $workflow.commandLine"
}
