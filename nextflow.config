
params {

	sample                 = "TCRBOA1"
	results                = "s3://noelnamai/data/results"
	cosmic_file            = "/mnt/efs/hg19/hg38_cosmic_mutations.vcf"
	known_indel_file       = "/mnt/efs/hg19/1000G_omni2.5.hg38.vcf.gz"
	genome_fasta           = "/mnt/efs/hg19/Homo_sapiens_assembly38.fasta"
	known_dbsnps_file      = "/mnt/efs/hg19/Homo_sapiens_assembly38.dbsnp.vcf"	
	known_dbsnps_1000_file = "/mnt/efs/hg19/1000G_phase1.snps.high_confidence.hg38.vcf.gz"
	mills_indel_file       = "/mnt/efs/hg19/Mills_and_1000G_gold_standard.indels.hg38.vcf.gz"

	threads {

		mutect2           = 1
		strelka2          = 5
		annovar           = 5
		mapping           = 5
		print_reads       = 5
		target_creator    = 5
		base_recalibrator = 5
    }
}

docker {

	enabled    = true
	remove     = true
	runOptions = '-u $(id -u):$(id -g)'
}

cloud {

	bootStorageSize    = "100 GB"
	sharedStorageMount = "/mnt/efs"
	instanceType       = "c4.2xlarge"
	sharedStorageId    = "fs-f2aff213"
	subnetId           = "subnet-4ea1cf2a"
	securityGroup      = "sg-0e611108c17231471"
	imageId            = "ami-0ddd9d7fa0dee83f4"
	
	autoscale {

		enabled           = true
		minInstances      = 3
		maxInstances      = 10
		terminateWhenIdle = true
		spotPrice         = 0.0724
		instanceType      = "c4.2xlarge" 
	}
}

process {

	scratch = true
}

executor {

	cpus         = 8
	name         = "local"
	dumpInterval = "1min"
}

trace {

	enabled = false
	file    = "$params.results/$params.sample/trace.txt"
}

report {

	enabled = true
	file    = "$params.results/$params.sample/report.html"
}

timeline {
	
	enabled = true
	file    = "$params.results/$params.sample/timeline.html"
}

workflow.onComplete = {

	println "Completed at     : $workflow.complete"
	println "Duration         : $workflow.duration"
	println "Execution status : ${workflow.success ? 'OK': 'failed'}"
	println "Command line     : $workflow.commandLine"
}
